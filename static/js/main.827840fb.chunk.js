(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(t,e,c){},function(t,e,c){},,function(t,e,c){},function(t,e,c){"use strict";c.r(e);var n,r,i=c(1),a=c.n(i),s=c(4),o=c.n(s),u=(c(9),c(2)),l=(c(10),c(0));function j(t){var e=t.startFocus,c=t.cancel,n=t.defaultFocusType,r=Object(i.useState)(""),a=Object(u.a)(r,2),s=a[0],o=a[1],j=Object(i.useState)(25),d=Object(u.a)(j,2),b=d[0],O=d[1],f=Object(i.useState)(n),h=Object(u.a)(f,2),p=h[0],x=h[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(s,b,[p])},children:[Object(l.jsxs)("label",{htmlFor:"pomGoal",accessKey:"g",children:[Object(l.jsx)("u",{children:"G"}),"oal:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"pomGoal",type:"text",onChange:function(t){return o(t.target.value)},value:s}),Object(l.jsxs)("label",{htmlFor:"pomDuration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration:"]}),Object(l.jsx)("input",{id:"pomDuration",type:"text",onChange:function(t){return O(parseInt(t.target.value)||0)},value:b}),Object(l.jsxs)("label",{accessKey:"p",children:[Object(l.jsx)("input",{type:"Radio",value:m.Personal,checked:p===m.Personal,onChange:function(){x(m.Personal)}}),Object(l.jsx)("u",{children:"P"}),"ersonal"]}),Object(l.jsxs)("label",{accessKey:"o",children:[Object(l.jsx)("input",{type:"Radio",value:m.Work,checked:p===m.Work,onChange:function(){x(m.Work)}}),"W",Object(l.jsx)("u",{children:"o"}),"rk"]}),Object(l.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(l.jsx)("u",{children:"S"}),"tart"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:c,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function d(t){var e=t.startBreak,c=t.breakType,n=t.suggestedDuration,r=t.cancel,a=Object(i.useState)(""),s=Object(u.a)(a,2),o=s[0],j=s[1],d=Object(i.useState)(n),b=Object(u.a)(d,2),O=b[0],f=b[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(o,O,c)},children:[Object(l.jsxs)("label",{htmlFor:"break-description",accessKey:"c",children:["Des",Object(l.jsx)("u",{children:"c"}),"ription:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"break-description",type:"text",onChange:function(t){return j(t.target.value)},value:o}),Object(l.jsxs)("label",{htmlFor:"pom-duration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration:"]}),Object(l.jsx)("input",{id:"pom-duration",type:"text",onChange:function(t){return f(parseInt(t.target.value)||0)},value:O}),Object(l.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(l.jsx)("u",{children:"S"}),"tart"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:r,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function b(t){var e=t.startFocus,c=t.startBreak,r=t.defaultFocusType,s=t.shortBreakMinutes,o=t.longBreakMinutes,b=Object(i.useState)(n.Idle),O=Object(u.a)(b,2),f=O[0],h=O[1],p=Object(i.useState)(0),x=Object(u.a)(p,2),g=x[0],y=x[1],v=Object(i.useState)(k.Short),S=Object(u.a)(v,2),m=S[0],F=S[1];function D(t,e){y(t),F(e),h(n.SetupBreak)}switch(f){case n.Idle:return Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"o",onClick:function(){return h(n.SetupFocus)},children:["F",Object(l.jsx)("u",{children:"o"}),"cus"]}),Object(l.jsxs)("button",{accessKey:"h",onClick:function(){return D(s,k.Short)},children:["S",Object(l.jsx)("u",{children:"h"}),"ort Break"]}),Object(l.jsxs)("button",{accessKey:"l",onClick:function(){return D(o,k.Long)},children:[Object(l.jsx)("u",{children:"L"}),"ong Break"]})]});case n.SetupFocus:return Object(l.jsx)(j,{startFocus:e,defaultFocusType:r,cancel:function(){return h(n.Idle)}});case n.SetupBreak:return Object(l.jsx)(d,{startBreak:c,breakType:m,suggestedDuration:g,cancel:function(){return h(n.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(f)),Object(l.jsx)(a.a.Fragment,{})}}function O(t){var e=t<0;t=Math.abs(t);var c=Math.floor(t/60),n=t%60,r=c<10?"0"+c:""+c,i=n<10?"0"+n:""+n;return"".concat(e?"-":"").concat(r,":").concat(i)}function f(t){var e=O(t.end-t.current);return Object(l.jsx)("pre",{children:e})}function h(t){var e=t.addDistraction,c=t.defaultDistractionType,n=t.cancel,r=Object(i.useState)(c),a=Object(u.a)(r,2),s=a[0],o=a[1],j=Object(i.useState)(""),d=Object(u.a)(j,2),b=d[0],O=d[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(b,s)},children:[Object(l.jsxs)("label",{accessKey:"d",htmlFor:"distraction-description",children:[Object(l.jsx)("u",{children:"D"}),"istraction description:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"distraction-description",type:"text",onChange:function(t){return O(t.target.value)}}),Object(l.jsxs)("label",{accessKey:"i",children:[Object(l.jsx)("input",{type:"radio",checked:s===S.Internal,onClick:function(){return o(S.Internal)}}),Object(l.jsx)("u",{children:"I"}),"nternal"]}),Object(l.jsxs)("label",{accessKey:"x",children:[Object(l.jsx)("input",{type:"radio",checked:s===S.External,onClick:function(){return o(S.External)}}),"E",Object(l.jsx)("u",{children:"x"}),"ternal"]}),Object(l.jsxs)("button",{type:"submit",children:[Object(l.jsx)("u",{children:"A"}),"dd"]}),Object(l.jsxs)("button",{onClick:n,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function p(t){var e=t.addDistraction,c=t.stopActivity,n=t.defaultDistractionType,s=Object(i.useState)(r.Default),o=Object(u.a)(s,2),j=o[0],d=o[1],b=Object(i.useState)(""),O=Object(u.a)(b,2),f=O[0],p=O[1];switch(j){case r.Default:return Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"d",onClick:function(){return d(r.AddingDistraction)},children:["A",Object(l.jsx)("u",{children:"d"}),"d Distraction"]}),Object(l.jsxs)("button",{accessKey:"n",onClick:function(){d(r.StoppingActivity),p((new Date).toLocaleString())},children:["E",Object(l.jsx)("u",{children:"n"}),"d Activity"]})]});case r.AddingDistraction:return Object(l.jsx)(h,{addDistraction:function(t,c){e(t,c),d(r.Default)},cancel:function(){return d(r.Default)},defaultDistractionType:n});case r.StoppingActivity:return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var e=Date.parse(f);e?c(Math.floor(e/1e3)):p((new Date).toLocaleString())},children:[Object(l.jsxs)("label",{htmlFor:"stopTime",accessKey:"t",children:["S",Object(l.jsx)("u",{children:"t"}),"op time:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"stopTime",type:"text",placeholder:"Stop time...",value:f,onChange:function(t){return p(t.target.value)}}),Object(l.jsxs)("button",{accessKey:"c",type:"submit",children:[Object(l.jsx)("u",{children:"C"}),"onfirm"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:function(){return d(r.Default)},children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}}!function(t){t[t.Idle=0]="Idle",t[t.SetupFocus=1]="SetupFocus",t[t.SetupBreak=2]="SetupBreak"}(n||(n={})),function(t){t[t.Default=0]="Default",t[t.AddingDistraction=1]="AddingDistraction",t[t.StoppingActivity=2]="StoppingActivity"}(r||(r={}));c(12);var x="";var g="";function y(t){var e=t.activity,c=t.currentTime,n="";n=null===e?"\ud83d\udca4":e.scheduledEnd>c?e.type===v.Focus?"\ud83e\udd14":"\ud83d\ude0e":"\u231b";var r="";null===e?r="Idling...":e.type===v.Break?r="Relaxing...":e.type===v.Focus&&(r="Focusing on ".concat(e.goal,"..."));var i,a="";return null!==e&&(a="".concat(O(e.scheduledEnd-c)," ")),function(t){if(x!==t){x=t;var e=document.querySelector("link[rel=icon]");e?e.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(x,"</text></svg>"):console.error("Could not find favicon link tag")}}(n),(i="".concat(a).concat(r))!==g&&(g=i,document.title=i),Object(l.jsx)("h1",{className:"Status",children:"".concat(n," ").concat(r)})}var v,S,k,m,F;function D(){return Math.floor(Date.now()/1e3)}function I(t){return 60*t}function w(t){return JSON.parse(JSON.stringify(t))}function B(t,e){return"start"!==t&&"scheduledEnd"!==t&&"end"!==t||!e?e:new Date(1e3*e).toLocaleString()}!function(t){t.Focus="focus",t.Break="break"}(v||(v={})),function(t){t.Internal="internal",t.External="external"}(S||(S={})),function(t){t.Short="short break",t.Long="long break"}(k||(k={})),function(t){t.Personal="personal",t.Work="work"}(m||(m={})),function(t){t.Idling="idling",t.Focusing="focusing",t.Relaxing="relaxing"}(F||(F={}));var C=void 0;var A=function(){var t,e=Object(i.useState)([]),c=Object(u.a)(e,2),n=c[0],r=c[1],s=Object(i.useState)(D()),o=Object(u.a)(s,2),j=o[0],d=o[1],O=Object(i.useState)(null),h=Object(u.a)(O,2),x=h[0],g=h[1],k=Object(i.useState)(S.Internal),A=Object(u.a)(k,2),K=A[0],E=A[1],T=Object(i.useState)(m.Work),N=Object(u.a)(T,2),J=N[0],M=N[1];if(Object(i.useEffect)((function(){if(x){var t=x.tags[0],e=x.distractions[x.distractions.length-1];x.type===v.Focus&&t&&t!==J&&M(t),e&&e.type!=K&&E(e.type)}}),[x]),Object(i.useEffect)((function(){var t=localStorage.getItem("activities");if(t){var e=JSON.parse(t);r(e)}var c=localStorage.getItem("currentActivity");if(c){var n=JSON.parse(c);g(n)}}),[]),Object(i.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(n))}),[n]),Object(i.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(x))}),[x]),x&&null===x.end)switch(x.type){case v.Focus:t=F.Focusing;break;case v.Break:t=F.Relaxing;break;default:console.error("Unknown activity type: ".concat(x.type)),t=F.Idling}else t=F.Idling;Object(i.useEffect)((function(){return void 0===C&&(C=window.setInterval((function(){var t=D();t>j&&d(t)}),500)),function(){window.clearInterval(C),C=void 0}}));var P=Object(i.useState)(!1),L=Object(u.a)(P,2),R=L[0],W=L[1];Object(i.useEffect)((function(){R||("granted"!==Notification.permission&&Notification.requestPermission(),W(!0))}));var q,G,U=Object(i.useState)(!1),z=Object(u.a)(U,2),H=z[0],Q=z[1];switch(Object(i.useEffect)((function(){if(t!==F.Idling&&x&&j>x.scheduledEnd&&!H){var e=new Notification("".concat(x.type," time complete"),{requireInteraction:!0,tag:"renotify",renotify:!0});e.onclick=function(){window.focus(),e.close()},Q(!0)}})),t){case F.Idling:q=Object(l.jsx)(b,{startFocus:function(t,e,c){var n=D(),r={start:n,end:null,scheduledEnd:n+I(e),goal:t,tags:c,type:v.Focus,distractions:[]};g(r),Q(!1)},startBreak:function(t,e,c){var n=D(),r={start:n,end:null,scheduledEnd:n+I(e),type:v.Break,goal:t,tags:[c],distractions:[]};g(r),Q(!1)},shortBreakMinutes:5,longBreakMinutes:15,defaultFocusType:J});break;case F.Focusing:case F.Relaxing:q=Object(l.jsx)(p,{addDistraction:function(t,e){if(x){var c=w(x);c.distractions||(c.distractions=[]),c.distractions.push({description:t,type:e}),g(c)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(t){if(x){var e=w(x),c=Array.from(n);e.end=t,c.push(e),r(c),g(null)}else console.error("trying to stop an activity when no activity is in progress")},defaultDistractionType:K});break;default:console.error("Unsupported currentState: ".concat(t)),q=Object(l.jsx)(a.a.Fragment,{})}return G=x&&t!=F.Idling?Object(l.jsx)(f,{end:x.scheduledEnd,current:j}):Object(l.jsx)(f,{end:0,current:0}),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(l.jsxs)("div",{className:"App-body",children:[Object(l.jsx)(y,{activity:x,currentTime:j}),Object(l.jsxs)("div",{className:"Timer-controls",children:[G,q]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Current Activity"}),Object(l.jsx)("pre",{children:JSON.stringify(x,B,2)}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Previous Activities"}),Object(l.jsx)("pre",{children:JSON.stringify(Array.from(n).reverse(),B,2)})]})]})},K=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,14)).then((function(e){var c=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;c(t),n(t),r(t),i(t),a(t)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(A,{})}),document.getElementById("root")),K()}],[[13,1,2]]]);
//# sourceMappingURL=main.827840fb.chunk.js.map